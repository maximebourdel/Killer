{# On étend notre layout #}
{% extends "::layout.html.twig" %}



{# Dans notre layout, il faut définir le block body #}
{% block body %}
<div class="container">
    <h3>{{ killer.name }} est en cours!!</h3>
    
    
    <div class="well">
      {% if killer.dateBegin is not null %}
        Date debut du Killer : {{ killer.dateBegin|date('Y-m-d') }}
      {% endif %}
      <br />
      {% if killer.dateEnd is not null %}
        Date fin du Killer : {{ killer.dateEnd|date('Y-m-d H:i:s') }}
      {% endif %}
      <br />
        Est créé par {{ killer.userAdmin.username }}
      <br />
      {{ killer.adresse }}
      <br />
      
      
      
    </div>
    
    {# On n'affiche pas le formulaire si l'utilisateur n'est pas admin 
    ET si participe déja #}
    {% if user is not null %}
        {% if killer.userAdmin.id != user.id and newPlayer is not null %}
            {{ form_start(formParticipation) }}
            
            {# Les erreurs générales du formulaire. #}
            {{ form_errors(formParticipation) }}
            {{ form_widget(formParticipation.save) }}
            
            {# Fermeture de la balise <form> du formulaire HTML #}
            {{ form_end(formParticipation) }}
        {% endif %}
    {% endif %}
    
    {# On n'affiche les droits de gestion des participants #}
    {% if killer.userAdmin.id == user.id %}
        <ul>
            <h5>Voici la liste des participants en course!</h5>
      		{% for participant in participants %}
        	    <div class="well">
        	    
        	    
        	       <strong>{{ participant.user.username }}</strong>
        	       doit tuer <strong>{{ participant.playerToKill.user.username }}</strong> 
        	       avec <strong>{{ participant.object.name }}</strong>
        	       
        	    </div>	
      		{% endfor %}
    	</ul>
	
    {% endif %}
        
</div>
{% endblock %}



{% block script %}
    <script> $('#consultKiller').addClass('active')</script>
{% endblock %}